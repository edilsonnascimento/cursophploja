03 - Criando Funções no PHP

01 - Criando Funções no PHP

Criado função para realizar a inserção no banco de dados.


02  - Criando a primeira função
 	function insereProduto($conexao, $nome, $preco){
 		$query = "insert into produtos (nome, preco) values ('{$nome}', {$preco})";
 		return mysqli_query($conexao, $query);
 	}



03 - Usando a função
Modifique o arquivo adiciona-produto.php e agora faça com que ele use a função.
Depois, compare com a nossa solução.
<?php include ("cabecalho.php"); ?>
<?php
$nome = $_GET['nome'];
$preco = $_GET['preco'];
$conexao = mysqli_connect("localhost", "root", "", "loja");
function insereProduto($conexao, $nome, $preco) {
    $query = "insert into produtos (nome, preco) values ('{$nome}', '{$preco}')";
    $resultadoDaInsercao = mysqli_query($conexao, $query);
    return $resultadoDaInsercao;
}
if(insereProduto($conexao, $nome, $preco)) {
?>
<p class="alert-success">Produto <?= $nome; ?>, <?= $preco; ?> adicionado com sucesso!</p>
<?php
} else {
?>
<p class="alert-danger">O produto <? = $nome; ?> não foi adicionado</p>
<?php
}
?>
<?php include ("rodape.php"); ?>

04 - Colocando menus
Criado menu adicionado bootstrap

05 - Melhorando o formulário
Adicionado table e classes do bootstrap


06 - mysqli_error
Capiturado erro ao inserir e mostrado na tela

	if (insereProduto($conexao, $nome, $preco)){
		?> <p class="text-success">Produto <?php echo $nome; ?> no valor de  <?php echo $preco?> adicionado com sucesso!</p> <?php            		
	} else{
		?> <p class="text-danger">Produto NÃO pode ser adicionado!</p> 
		<?php $msg = mysql_error($conexao);
	} ?>

07 - Muitas funções?
Na dúvida usar o manual do php.	